<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Baby CPR: Hall Sensor Library for ESP-IDF</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Baby CPR
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Hall Sensor Library for ESP-IDF </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This library provides functionalities to read data from a Hall sensor and manage the data flow between producer and consumer tasks using FreeRTOS queues.</p>
<h1><a class="anchor" id="autotoc_md22"></a>
Features</h1>
<ul>
<li><b>Hall Sensor Data Structure:</b> Stores raw, filtered, and accumulated ADC values along with a timestamp.</li>
<li><b>Data Producer:</b> Starts a task that continuously reads data from the Hall sensor and sends it to a FreeRTOS queue.</li>
<li><b>Data Consumer Example:</b> Provides an example of how to receive and process Hall sensor data from the queue.</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Installation</h1>
<ol type="1">
<li><p class="startli">Copy the <code>hall_sensor</code> module into the <code>components/</code> directory of your ESP-IDF project.</p>
<p class="startli">The project structure should look like this:</p>
</li>
</ol>
<div class="fragment"><div class="line">your_project/</div>
<div class="line">├── CMakeLists.txt</div>
<div class="line">├── main/</div>
<div class="line">│   ├── CMakeLists.txt</div>
<div class="line">│   └── your_main_file.c</div>
<div class="line">└── components/</div>
<div class="line">    └── hall_sensor/</div>
<div class="line">        ├── include/</div>
<div class="line">        │   └── hall_sensor.h</div>
<div class="line">        └── hall_sensor.c</div>
</div><!-- fragment --><ol type="1">
<li>In the root <code>CMakeLists.txt</code> file of your project, add the following line to include the <code>components/</code> directory:</li>
</ol>
<div class="fragment"><div class="line">set(EXTRA_COMPONENT_DIRS ./components/)</div>
</div><!-- fragment --><ol type="1">
<li>In the <code>CMakeLists.txt</code> file of your main application (e.g., in the <code>main/</code> directory), include the <code>hall_sensor</code> component:</li>
</ol>
<div class="fragment"><div class="line">idf_component_register(SRCS &quot;your_main_file.c&quot;</div>
<div class="line">                       INCLUDE_DIRS &quot;include&quot;</div>
<div class="line">                       REQUIRES &quot;dsp esp_adc driver hall_sensor&quot;)</div>
</div><!-- fragment --><ol type="1">
<li>In your source files where you will use the Hall sensor functions, include the library:</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="hall__sensor_8h.html">hall_sensor.h</a>&quot;</span></div>
<div class="ttc" id="ahall__sensor_8h_html"><div class="ttname"><a href="hall__sensor_8h.html">hall_sensor.h</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md24"></a>
Example Usage</h1>
<h2><a class="anchor" id="autotoc_md25"></a>
Hall Sensor Data Producer</h2>
<p>To start reading data from the Hall sensor, simply call:</p>
<div class="fragment"><div class="line"><a class="code" href="group__hall__sensor.html#gac57d4adcdefc9b269771a06cff5c390d">hall_sensor_start</a>();</div>
<div class="ttc" id="agroup__hall__sensor_html_gac57d4adcdefc9b269771a06cff5c390d"><div class="ttname"><a href="group__hall__sensor.html#gac57d4adcdefc9b269771a06cff5c390d">hall_sensor_start</a></div><div class="ttdeci">void hall_sensor_start(void)</div><div class="ttdoc">Start the Hall sensor data producer task.</div><div class="ttdef"><b>Definition:</b> hall_sensor.c:249</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
Consumer Task Example</h2>
<p>Here is an example of how to create a consumer task that receives and processes Hall sensor data from the queue:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="hall__sensor_8h.html">hall_sensor.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">extern</span> QueueHandle_t hall_sensor_data_queue;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> consumer_task(<span class="keywordtype">void</span> *pvParameter)</div>
<div class="line">{</div>
<div class="line">    hall_sensor_data_t received_data;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Receive data from the queue</span></div>
<div class="line">        <span class="keywordflow">if</span> (xQueueReceive(hall_sensor_data_queue, &amp;received_data, portMAX_DELAY) == pdTRUE)</div>
<div class="line">        {</div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt; filtered: %.2f\n&quot;</span>, received_data.filtered_value);</div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt; adc_acum: %.2f\n&quot;</span>, received_data.adc_acum);</div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt; raw_value: %i\n&quot;</span>, received_data.raw_value);</div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt; time: %li\n&quot;</span>, received_data.timestamp);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__hall__sensor.html#gac57d4adcdefc9b269771a06cff5c390d">hall_sensor_start</a>();</div>
<div class="line">    xTaskCreate(consumer_task, <span class="stringliteral">&quot;Consumer Task&quot;</span>, 2048, NULL, 5, NULL);</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md27"></a>
License</h1>
<p>This software and its associated documentation files (the "Software") are the property of the copyright holder. <br  />
 The unauthorized reproduction, modification, distribution, sublicense, or sale of the Software is prohibited unless explicitly permitted by the copyright holder. <br  />
</p>
<p>Permission is hereby granted, free of charge, to authorized individuals or entities for the sole purpose of using the Software in accordance with the terms set forth by the copyright holder. This permission is non-transferable and may be revoked at any time. <br  />
</p>
<p>Redistribution of this Software, whether in source or binary form, is strictly forbidden without prior written permission from the copyright holder. <br  />
</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p>see the [LICENSE](LICENSE) file for details.</p>
<h1><a class="anchor" id="autotoc_md28"></a>
Contributing</h1>
<p>Contributions to this library are welcome! Feel free to open issues or submit pull requests to add new features or improve existing ones.</p>
<h1><a class="anchor" id="autotoc_md29"></a>
Contact</h1>
<p>For any inquiries or suggestions, please contact Gus Di Stefano at <a href="#" onclick="location.href='mai'+'lto:'+'nar'+'ni'+'anc'+'od'+'er@'+'gm'+'ail'+'.c'+'om'; return false;">narniancoder@gmail.com</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
