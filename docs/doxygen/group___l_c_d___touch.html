<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Baby CPR: LCD &amp; Touch Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Baby CPR
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LCD &amp; Touch Component</div>  </div>
</div><!--header-->
<div class="contents">

<p>Component for LCD &amp; Touch screen handling in ESP-IDF.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad19f0be9d04ab75121b386770a0e2f7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_c_d___touch.html#gad19f0be9d04ab75121b386770a0e2f7f">backlight</a> (uint8_t state)</td></tr>
<tr class="memdesc:gad19f0be9d04ab75121b386770a0e2f7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls the backlight of the LCD.  <a href="group___l_c_d___touch.html#gad19f0be9d04ab75121b386770a0e2f7f">More...</a><br /></td></tr>
<tr class="separator:gad19f0be9d04ab75121b386770a0e2f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac66276dada55d8b5034b0e748a303a73"><td class="memItemLeft" align="right" valign="top">spi_host_device_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_c_d___touch.html#gac66276dada55d8b5034b0e748a303a73">init_spi_bus</a> (void)</td></tr>
<tr class="memdesc:gac66276dada55d8b5034b0e748a303a73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the SPI bus for communication with the LCD and Touch panel.  <a href="group___l_c_d___touch.html#gac66276dada55d8b5034b0e748a303a73">More...</a><br /></td></tr>
<tr class="separator:gac66276dada55d8b5034b0e748a303a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafac47b59d58e619788beaf5c65058dbd"><td class="memItemLeft" align="right" valign="top">esp_lcd_touch_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_c_d___touch.html#gafac47b59d58e619788beaf5c65058dbd">init_touch_panel</a> (spi_host_device_t spi_host)</td></tr>
<tr class="memdesc:gafac47b59d58e619788beaf5c65058dbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the touch panel.  <a href="group___l_c_d___touch.html#gafac47b59d58e619788beaf5c65058dbd">More...</a><br /></td></tr>
<tr class="separator:gafac47b59d58e619788beaf5c65058dbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga668e1f1069e1a83977f75a373784d0dd"><td class="memItemLeft" align="right" valign="top">esp_lcd_panel_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_c_d___touch.html#ga668e1f1069e1a83977f75a373784d0dd">init_display</a> (spi_host_device_t spi_host, lv_disp_drv_t *disp_drv)</td></tr>
<tr class="memdesc:ga668e1f1069e1a83977f75a373784d0dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the LCD display.  <a href="group___l_c_d___touch.html#ga668e1f1069e1a83977f75a373784d0dd">More...</a><br /></td></tr>
<tr class="separator:ga668e1f1069e1a83977f75a373784d0dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80e8087669ca080ecc6b56498137fa45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_c_d___touch.html#ga80e8087669ca080ecc6b56498137fa45">init_LVGL</a> ()</td></tr>
<tr class="memdesc:ga80e8087669ca080ecc6b56498137fa45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the LVGL (LittlevGL) graphics library for the display and touch screen.  <a href="group___l_c_d___touch.html#ga80e8087669ca080ecc6b56498137fa45">More...</a><br /></td></tr>
<tr class="separator:ga80e8087669ca080ecc6b56498137fa45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Component for LCD &amp; Touch screen handling in ESP-IDF. </p>
<p>This component provides an interface for initializing and controlling an LCD display and touch panel using the ESP-IDF framework. It includes functions to initialize the SPI bus, set up the display and touch panel, control the backlight, and draw basic shapes.</p>
<p>Copyright (c) 2024 Gus Di Stefano <a href="#" onclick="location.href='mai'+'lto:'+'nar'+'ni'+'anc'+'od'+'er@'+'gm'+'ail'+'.c'+'om'; return false;">narni<span style="display: none;">.nosp@m.</span>anco<span style="display: none;">.nosp@m.</span>der@g<span style="display: none;">.nosp@m.</span>mail<span style="display: none;">.nosp@m.</span>.com</a></p>
<p>MIT Licensed as described in the file LICENSE </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad19f0be9d04ab75121b386770a0e2f7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad19f0be9d04ab75121b386770a0e2f7f">&#9670;&nbsp;</a></span>backlight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void backlight </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls the backlight of the LCD. </p>
<p>This function sets the state of the LCD backlight. A state of 1 turns the backlight on, while a state of 0 turns it off.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>The state to set the backlight to. 1 for on, 0 for off. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga668e1f1069e1a83977f75a373784d0dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga668e1f1069e1a83977f75a373784d0dd">&#9670;&nbsp;</a></span>init_display()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_lcd_panel_handle_t init_display </td>
          <td>(</td>
          <td class="paramtype">spi_host_device_t&#160;</td>
          <td class="paramname"><em>spi_host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lv_disp_drv_t *&#160;</td>
          <td class="paramname"><em>disp_drv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the LCD display. </p>
<p>This function initializes the LCD display, setting it up for use with the LVGL library.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_host</td><td>The SPI host device to be used for communication with the display. </td></tr>
    <tr><td class="paramname">disp_drv</td><td>The display driver for LVGL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>esp_lcd_panel_handle_t The handle for the initialized display. </dd></dl>

</div>
</div>
<a id="ga80e8087669ca080ecc6b56498137fa45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80e8087669ca080ecc6b56498137fa45">&#9670;&nbsp;</a></span>init_LVGL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_LVGL </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the LVGL (LittlevGL) graphics library for the display and touch screen. </p>
<p>This function initializes the LVGL library, the SPI bus, the display, and the touch panel, and sets up the required buffers for drawing. It also registers the display and touch drivers with LVGL and installs a periodic tick timer to update LVGL. Additionally, it creates a task for the LVGL task loop and displays the initial widget on the screen.</p>
<p>The initialization process includes:</p><ul>
<li>Initializing the SPI bus for communication with the display and touch panel.</li>
<li>Setting up the LVGL display buffer and touch input drivers.</li>
<li>Registering the LVGL display and touch drivers to the LVGL framework.</li>
<li>Allocating memory for the draw buffers used by LVGL.</li>
<li>Creating a task for the LVGL loop, which is responsible for updating the display.</li>
<li>Installing a periodic timer to call LVGL tick functions at a specified interval.</li>
</ul>
<p>This function is essential for setting up the LVGL graphics environment and making the display and touch functionality ready for use in the application.</p>
<dl class="section note"><dt>Note</dt><dd>This function uses FreeRTOS and ESP-IDF features, such as tasks, timers, and semaphores. </dd>
<dd>
The memory allocated for the draw buffers must be large enough to hold at least 1/10 of the screen size, as recommended by LVGL documentation. </dd></dl>

</div>
</div>
<a id="gac66276dada55d8b5034b0e748a303a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac66276dada55d8b5034b0e748a303a73">&#9670;&nbsp;</a></span>init_spi_bus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spi_host_device_t init_spi_bus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the SPI bus for communication with the LCD and Touch panel. </p>
<p>This function configures the SPI bus with the necessary parameters and returns the SPI host device that can be used for communication.</p>
<dl class="section return"><dt>Returns</dt><dd>spi_host_device_t The initialized SPI host device. </dd></dl>

</div>
</div>
<a id="gafac47b59d58e619788beaf5c65058dbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafac47b59d58e619788beaf5c65058dbd">&#9670;&nbsp;</a></span>init_touch_panel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_lcd_touch_handle_t init_touch_panel </td>
          <td>(</td>
          <td class="paramtype">spi_host_device_t&#160;</td>
          <td class="paramname"><em>spi_host</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the touch panel. </p>
<p>This function initializes the touch panel using the given SPI host device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_host</td><td>The SPI host device to be used for communication with the touch panel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>esp_lcd_touch_handle_t The handle for the initialized touch panel. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
