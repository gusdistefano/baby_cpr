<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Baby CPR: Buzzer Driver for ESP-IDF</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Baby CPR
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Buzzer Driver for ESP-IDF </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This library provides an easy-to-use interface for controlling a passive buzzer with the ESP-IDF framework. It includes functions to initialize the buzzer and play tones with or without volume control, making it ideal for generating sound alerts or feedback in embedded systems.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features</h1>
<ul>
<li><b>Buzzer Initialization:</b> Prepares the buzzer for playing sounds by configuring the necessary GPIO pins.</li>
<li><b>Music and Tone Playback with Volume Control:</b> Play tones or musical notes at specific frequencies and durations, with adjustable volume.</li>
<li><b>Tone and Music Playback with Preconfigured Volume:</b> Plays tones or music using the default volume configured via <code>menuconfig</code>.</li>
<li><b>Configurable Pin and Default Volume:</b> The buzzer pin (<code>BUZZER_PIN</code>) and default volume (<code>DEFAULT_VOLUME</code>) can be set through the <code>idf.py menuconfig</code> tool.</li>
<li><b>Flexible API:</b><ul>
<li><code>play_music</code>: Play musical notes with explicit volume control.</li>
<li><code>play_music_nv</code>: Play musical notes using preconfigured volume.</li>
<li><code>play_tone</code>: Play simple tones for alerts or feedback using the system volume.</li>
</ul>
</li>
<li><b>Preprogrammed Melodies:</b> Includes popular melodies such as "Pirates of the Caribbean," "Super Mario," and "Star Wars" themes, ready to play on the buzzer. Additional features and improvements will be added over time to enhance the buzzer's capabilities.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Installation</h1>
<ol type="1">
<li><p class="startli">Copy the <code>buzzer</code> module into the <code>components/</code> directory of your ESP-IDF project.</p>
<p class="startli">The project structure should look like this:</p>
</li>
</ol>
<div class="fragment"><div class="line">your_project/</div>
<div class="line">├── CMakeLists.txt</div>
<div class="line">├── main/</div>
<div class="line">│   ├── CMakeLists.txt</div>
<div class="line">│   └── your_main_file.c</div>
<div class="line">└── components/</div>
<div class="line">    └── buzzer/</div>
<div class="line">       ├── include/</div>
<div class="line">       │   └── buzzer.h</div>
<div class="line">       │   └── melody.h</div>
<div class="line">       └── buzzer.c</div>
<div class="line">       └── melody.c</div>
</div><!-- fragment --><ol type="1">
<li>In the root <code>CMakeLists.txt</code> file of your project, add the following line to include the <code>components/</code> directory:</li>
</ol>
<div class="fragment"><div class="line">set(EXTRA_COMPONENT_DIRS ./components/)</div>
</div><!-- fragment --><ol type="1">
<li>In the <code>CMakeLists.txt</code> file of your main application (e.g., in the <code>main/</code> directory), include the <code>buzzer</code> and <code>melody</code> components:</li>
</ol>
<div class="fragment"><div class="line">idf_component_register(SRCS &quot;your_main_file.c&quot;</div>
<div class="line">                    INCLUDE_DIRS &quot;include&quot;</div>
<div class="line">                    REQUIRES &quot;buzzer&quot; &quot;melody&quot;)</div>
</div><!-- fragment --><ol type="1">
<li>In your source files where you will use the buzzer functions, include the libraries:</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="buzzer_8h.html">buzzer.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;melody.h&quot;</span></div>
<div class="ttc" id="abuzzer_8h_html"><div class="ttname"><a href="buzzer_8h.html">buzzer.h</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Configuration</h1>
<p>Before using the buzzer, configure the GPIO pin and the default volume level via the ESP-IDF configuration tool (<code>idf.py menuconfig</code>):</p>
<ul>
<li><b>BUZZER_PIN:</b> Set the GPIO pin that controls the buzzer.</li>
<li><b>DEFAULT_VOLUME:</b> Set the default volume level for tone generation without explicit volume control.</li>
</ul>
<p>To access these settings, run:</p>
<div class="fragment"><div class="line">idf.py menuconfig</div>
</div><!-- fragment --><p>Navigate to the Buzzer configuration section to set the pin and volume as needed.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Example Usage</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
Initializing the Buzzer</h2>
<p>To initialize the buzzer before playing tones:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="buzzer_8h.html">buzzer.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__buzzer.html#ga9f2dd62007e6de6b7fbe0534e48fbd39">init_buzzer</a>();</div>
<div class="ttc" id="agroup__buzzer_html_ga9f2dd62007e6de6b7fbe0534e48fbd39"><div class="ttname"><a href="group__buzzer.html#ga9f2dd62007e6de6b7fbe0534e48fbd39">init_buzzer</a></div><div class="ttdeci">void init_buzzer(void)</div><div class="ttdoc">Initializes the buzzer.</div><div class="ttdef"><b>Definition:</b> buzzer.c:15</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
Playing a Music with Volume Control</h2>
<p>To play a musical note with a specific frequency, duration, and volume:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="buzzer_8h.html">buzzer.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">uint32_t frequency = 4400;  <span class="comment">// 440 Hz tone</span></div>
<div class="line">uint32_t duration = 500;    <span class="comment">// 500 milliseconds</span></div>
<div class="line">uint32_t volume = 10;       <span class="comment">// Volume level (hardware-specific)</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__buzzer.html#ga4c01371d7ba1e29be1ed84635cf375d3">play_music</a>(frequency, duration, volume);</div>
<div class="ttc" id="agroup__buzzer_html_ga4c01371d7ba1e29be1ed84635cf375d3"><div class="ttname"><a href="group__buzzer.html#ga4c01371d7ba1e29be1ed84635cf375d3">play_music</a></div><div class="ttdeci">void play_music(uint32_t frequency, uint32_t duration_ms, uint32_t volume)</div><div class="ttdoc">Plays music on the buzzer using PWM.</div><div class="ttdef"><b>Definition:</b> buzzer.c:40</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Playing a Music without Volume Control</h2>
<p>To play a musical note using the default or preconfigured volume:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="buzzer_8h.html">buzzer.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">uint32_t frequency = 4400;  <span class="comment">// 4400 Hz tone</span></div>
<div class="line">uint32_t duration = 500;    <span class="comment">// 500 milliseconds</span></div>
<div class="line"> </div>
<div class="line">play_tone_nv(frequency, duration);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Playing a simple tone</h2>
<p>For alerts, beeps, or other feedback tones using the system-wide volume configuration:</p>
<div class="fragment"></div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
Playing Preprogrammed Melodies</h1>
<p>The library also includes functions to play popular melodies using the buzzer:</p>
<ul>
<li>**"Pirates of Caribbean" Theme:**</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;melody.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__buzzer.html#gaf1623fbfcaf620d9f4a94b20af2f5cbf">play_pirate</a>();</div>
<div class="ttc" id="agroup__buzzer_html_gaf1623fbfcaf620d9f4a94b20af2f5cbf"><div class="ttname"><a href="group__buzzer.html#gaf1623fbfcaf620d9f4a94b20af2f5cbf">play_pirate</a></div><div class="ttdeci">void play_pirate()</div><div class="ttdoc">Plays the &quot;Pirate&quot; theme melody on the buzzer.</div><div class="ttdef"><b>Definition:</b> melodys.c:15</div></div>
</div><!-- fragment --><ul>
<li>**"Super Mario" Theme:**</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;melody.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__buzzer.html#ga94718af239f1b32a82e512ab10e5b31c">play_super_mario</a>();</div>
<div class="ttc" id="agroup__buzzer_html_ga94718af239f1b32a82e512ab10e5b31c"><div class="ttname"><a href="group__buzzer.html#ga94718af239f1b32a82e512ab10e5b31c">play_super_mario</a></div><div class="ttdeci">void play_super_mario(void)</div><div class="ttdoc">Plays the &quot;Super Mario&quot; theme melody on the buzzer.</div><div class="ttdef"><b>Definition:</b> melodys.c:85</div></div>
</div><!-- fragment --><ul>
<li>**"Star Wars" Theme:**</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;melody.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__buzzer.html#ga74da7c64ee9aac5c2b90a23b02c3e184">play_star_wars</a>();</div>
<div class="ttc" id="agroup__buzzer_html_ga74da7c64ee9aac5c2b90a23b02c3e184"><div class="ttname"><a href="group__buzzer.html#ga74da7c64ee9aac5c2b90a23b02c3e184">play_star_wars</a></div><div class="ttdeci">void play_star_wars(void)</div><div class="ttdoc">Plays the &quot;Star Wars&quot; theme melody on the buzzer.</div><div class="ttdef"><b>Definition:</b> melodys.c:156</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
License</h1>
<p>This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Contributing</h1>
<p>Contributions are welcome! Feel free to open issues or submit pull requests to improve the buzzer driver or add new features.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Contact</h1>
<p>For any inquiries or suggestions, please contact Gus Di Stefano at <a href="#" onclick="location.href='mai'+'lto:'+'nar'+'ni'+'anc'+'od'+'er@'+'gm'+'ail'+'.c'+'om'; return false;">narniancoder@gmail.com</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
